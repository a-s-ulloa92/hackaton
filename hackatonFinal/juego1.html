<!DOCTYPE html>
<html>
<div class=center>
<head>

  <meta charset="UTF-8">

  <title>Juegos</title>

    <link rel="stylesheet" href="css/stylegame.css" media="screen" type="text/css" />

</head>

<body>
    <div class=title>
        <h3>Matix</h3>
    </div>
    <div class="numbers">
      <p id="text"></p>
    </div>
    <!-- Enlaces de listener y speech recognizer -->
    <script src='https://code.responsivevoice.org/responsivevoice.js'></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="//responsivevoice.org/responsivevoice/responsivevoice.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/annyang/2.2.1/annyang.min.js"></script>
    <script src='https://code.responsivevoice.org/responsivevoice.js'></script>
    <script>
    //Parte que habla
    responsiveVoice.setDefaultVoice("Spanish Female");
    annyang.setLanguage(`es-MX`);
    responsiveVoice.OnVoiceReady = function() {
      console.log("speech time?");
      //responsiveVoice.speak($('#text').val());
      function repetir(){
      var op = Math.floor((Math.random() * 4) + 1);
      resp = 0;
      if(op == 1){
        var aux1 = Math.floor((Math.random() * 10) + 1);
        var aux2 = Math.floor((Math.random() * 10) + 1);
        responsiveVoice.speak(aux1 + 'mas' + aux2);
        var element = document.getElementById("text");
        element.innerHTML = ""+ aux1 + "+" + aux2 + '=';
        resp = aux1 + aux2;
      }else if(op == 2){
        resp = Math.floor((Math.random() * 10) + 1);
        var aux2 = Math.floor((Math.random() * 100) + 1);
        var aux3 = aux2 + resp;
        var element = document.getElementById("text");
        element.innerHTML = ""+ aux3 + "-" + aux2 + '=';
        responsiveVoice.speak(aux3 + 'menos' + aux2);
      }else if(op == 3){
        var aux1 = Math.floor((Math.random() * 10) + 1);
        var aux2 = Math.floor((Math.random() * 10) + 1);
        var element = document.getElementById("text");
        element.innerHTML = ""+ aux1 + "x" + aux2 + '=';
        responsiveVoice.speak(aux1 + 'por' + aux2);
        resp = aux1 * aux2;
      }else{
        resp = Math.floor((Math.random() * 10) + 2);
        var auxb = Math.floor((Math.random() * 10) + 2);
        var auxa = auxb * resp;
        var element = document.getElementById("text");
        element.innerHTML = ""+ auxa + "/" + auxb + '=';
        responsiveVoice.speak(auxa + 'entre' + auxb);
    }
  }
    var commands = {
      '*val': function(val) {
        var respVal = parseInt(val);
        if(respVal == resp){
          responsiveVoice.speak("Respuesta correcta");
        }else{
          responsiveVoice.speak("Respuesta incorrecta");
        }
      }
    };
    annyang.addCommands(commands);
    annyang.debug();
    annyang.start();
    repetir();
}
/*flag = false;
do{
  repeat();
  var commandI = {
    'siguiente': flag = true,
    'terminar': flag = false
  }
  annyang.addCommands(commandI);
  annyang.debug();
  annyang.start();
}while(flag);*/
/*


    var commands = {
      '*val': function(val) {

    }
    }};

    annyang.addCommands(commands);
    annyang.start();
    */
    </script>
  </body>
</body>
</html>
